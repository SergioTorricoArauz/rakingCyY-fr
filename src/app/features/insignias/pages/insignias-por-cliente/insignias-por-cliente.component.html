<div class="profile-container">
    <!-- Sección de información del usuario -->
    <div class="user-info-section" *ngIf="currentUser">
        <div class="user-header">
            <div class="user-avatar">
                <span class="avatar-text">{{ currentUser.nombre.charAt(0).toUpperCase() }}</span>
            </div>
            <div class="user-details">
                <h1 class="user-name">{{ currentUser.nombre }}</h1>
                <p class="user-id">ID: {{ currentUser.id }}</p>
            </div>
        </div>
        <div class="historial-btn-container">
            <button class="historial-btn" routerLink="/carritos">
                <span class="material-icons">Buys</span>
                Ver historial de compras
            </button>
        </div>
    </div>

    <!-- Sección de insignias -->
    <div class="insignias-section">
        <h2 class="section-title">Mis Insignias</h2>
        <p *ngIf="loading" class="info">Cargando insignias...</p>

        <p *ngIf="errorMsg" class="error">{{ errorMsg }}</p>

        <div class="cards-grid" *ngIf="!loading && !errorMsg && insignias.length > 0">
            <div class="card" *ngFor="let ins of insignias">
                <div class="card-header">
                    <h3>{{ ins.nombre }}</h3>
                </div>
                <div class="card-body">
                    <p><strong>Requisitos:</strong> {{ ins.requisitos }}</p>
                    <p>
                        <strong>Fecha otorgada:</strong>
                        {{ ins.fechaOtorgada | date: 'dd/MM/yyyy' }}
                    </p>
                </div>
            </div>
        </div>

        <p *ngIf="
            !loading &&
            !errorMsg &&
            insignias.length === 0
          " class="info">
            No tienes insignias por el momento.
        </p>
    </div>
</div>